{"version":3,"sources":["script.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_defineProperty","obj","value","menuButton","document","querySelector","addEventListener","createDialog","close","removeDialog","nav","dialog","removeChild","createElement","ul","hr","forEach","element","li","link","classList","add","setAttribute","innerText","appendChild","open","id","ShortenUrl","this","get","_shortenUrl","set","input","_this","Array","isArray","structuredClone","_linkId","linkId","displayResults","shortenUrl","fetch","concat","then","response","status","Error","statusText","json","data","push","shortenedLink","result","full_short_link","displayItem","saveResultsToLocalStorage","err","console","log","results","localStorage","setItem","JSON","stringify","itemDiv","longLink","shortLink","copyLink","copyShortenedLink","append","displayItemContainer","resultContainer","parent","insertAdjacentElement","prepend","navigator","clipboard","writeText","copyButton","items","_ref","checkShortenUrlInput","test","displayErrorMessage","errorMsg","errorContainer","inputLabel","urlInput","shortenForm","clearErrorMessage","remove","shortenUrlForm","shortenUrlInput","user","getItem","parse","ev","preventDefault"],"mappings":"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","file":"script.js","sourcesContent":["'use-strict'\r\n\r\n/*\r\n  Responsive landing page integrated with \r\n  shrtcode API - https://app.shrtco.de/\r\n*/\r\n\r\nconst menuButton = document.querySelector('#menu')\r\n\r\nmenuButton.addEventListener('click', () => {\r\n  if(!document.querySelector('#menu-modal')) \r\n    return createDialog()\r\n\r\n  document.querySelector('#menu-modal').close()\r\n  removeDialog()\r\n})\r\n\r\nconst removeDialog = () => {\r\n  const nav = document.querySelector('.nav')\r\n  const dialog = document.querySelector('#menu-modal')\r\n  nav.removeChild(dialog)\r\n}\r\n\r\nconst createDialog = () => {\r\n  const nav = document.querySelector('.nav')\r\n  const dialog = document.createElement('dialog')\r\n  const ul = document.createElement('ul')\r\n  const hr = document.createElement('hr')\r\n  const dialogContent = ['Features', 'Pricing', 'Resources', 'hr', 'Login', 'Sign Up']\r\n\r\n  dialogContent.forEach(element => {\r\n    const li = document.createElement('li')\r\n    const link = document.createElement('a')\r\n\r\n    if(element==='Sign Up') link.classList.add('cta')\r\n\r\n    if(element!=='hr') {\r\n      link.setAttribute('href', '#')\r\n      link.innerText = element\r\n      li.appendChild(link)\r\n    }else {\r\n      li.appendChild(hr)\r\n    }\r\n\r\n    ul.appendChild(li)\r\n  })\r\n\r\n  ul.classList.add('menu-links')\r\n  dialog.open = true\r\n  dialog.id = 'menu-modal'\r\n  dialog.classList.add('container')\r\n  dialog.appendChild(ul)\r\n  nav.appendChild(dialog)\r\n}\r\n\r\nclass ShortenUrl {\r\n  _shortenUrl = []\r\n  _linkId = 0\r\n\r\n  get shortenUrl() {\r\n    return this._shortenUrl\r\n  }\r\n\r\n  set shortenUrl(input) {\r\n    if(Array.isArray(input)) {\r\n      this._shortenUrl = structuredClone(input)\r\n      this._linkId = this._shortenUrl[this._shortenUrl.length - 1].linkId\r\n      displayResults(this.shortenUrl)\r\n    }else {\r\n      fetch(`https://api.shrtco.de/v2/shorten?url=${input}`)\r\n      .then(response => {\r\n        if(response.status!==201) throw new Error(response.statusText)\r\n        return response.json()\r\n      })\r\n      .then(data => {\r\n        let id = this._linkId + 1\r\n        this._linkId = id\r\n        this._shortenUrl.push({\r\n          linkId: id,\r\n          link: input, \r\n          shortenedLink: data.result.full_short_link\r\n        })\r\n        displayItem( id, input, data.result.full_short_link )\r\n        saveResultsToLocalStorage(this.shortenUrl)\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nfunction saveResultsToLocalStorage(results) {\r\n  localStorage.setItem('shortlyLinks', JSON.stringify(results))\r\n  console.log('Save item to localStorage...')\r\n}\r\n\r\nfunction displayItem( linkId, link, shortenedLink ) {\r\n  const itemDiv = document.createElement('div')\r\n  const longLink = document.createElement('span')\r\n  const shortLink = document.createElement('span')\r\n  const copyLink = document.createElement('button')\r\n\r\n  longLink.classList.add('features__results--link')\r\n  longLink.innerText = link\r\n  shortLink.classList.add('features__results--shortenlink')\r\n  shortLink.innerText = shortenedLink\r\n  copyLink.innerText = 'Copy'\r\n  copyLink.setAttribute('id', 'copy-link')\r\n  copyLink.classList.add('cta', `link${linkId}`)\r\n  copyLink.addEventListener('click', () => {\r\n    copyShortenedLink( `link${linkId}`, shortenedLink )\r\n  })\r\n\r\n  itemDiv.append(longLink, shortLink, copyLink)\r\n  displayItemContainer(itemDiv)\r\n}\r\n\r\nfunction displayItemContainer(itemDiv) {\r\n  let resultContainer\r\n\r\n  if(document.querySelector('#features-result')) {\r\n    resultContainer = document.querySelector('#features-result')\r\n  }else {\r\n    const parent = document.querySelector('.features')\r\n    resultContainer = document.createElement('div')\r\n    resultContainer.setAttribute('id', 'features-result')\r\n    resultContainer.classList.add('features__results')\r\n    resultContainer.classList.add('container')\r\n    parent.insertAdjacentElement( \"afterbegin\", resultContainer )\r\n  }\r\n\r\n  return resultContainer.prepend(itemDiv)\r\n}\r\n\r\nfunction copyShortenedLink( linkId, link ) {\r\n  navigator.clipboard.writeText(link)\r\n  .then(() => {\r\n    const copyButton = document.querySelector(`.${linkId}`)\r\n    copyButton.innerText = 'Copied!'\r\n    copyButton.classList.add('features__results--copiedlink')\r\n  })\r\n  .catch(err => console.log(err))\r\n}\r\n\r\nfunction displayResults(items) {\r\n\r\n  items.forEach( ({linkId, link, shortenedLink}) => {\r\n    displayItem( linkId, link, shortenedLink )\r\n  })\r\n}\r\n\r\nconst checkShortenUrlInput = input => {\r\n  let validUrl = /^(ftp|http|https):\\/\\/[^ \"]+$/\r\n\r\n  if(!input) {\r\n    displayErrorMessage('Please add a link')\r\n    return false\r\n  }\r\n\r\n  return validUrl.test(input) ? true : false\r\n}\r\n\r\nconst displayErrorMessage = errorMsg => {\r\n  let errorContainer = document.createElement('span')\r\n\r\n  if(document.querySelector('#error-msg'))\r\n    errorContainer = document.querySelector('#error-msg')\r\n\r\n  const inputLabel = document.querySelector('.input-label')\r\n  const urlInput = document.querySelector('#url-input')\r\n  const shortenForm = document.querySelector('.shorten')\r\n\r\n  urlInput.classList.add('shorten__input--error')\r\n  shortenForm.classList.add('shorten__error')\r\n  errorContainer.setAttribute('id', 'error-msg')\r\n  errorContainer.innerText = errorMsg\r\n  inputLabel.appendChild(errorContainer)\r\n}\r\n\r\nconst clearErrorMessage = () => {\r\n  const errorContainer = document.querySelector('#error-msg')\r\n  const inputLabel = document.querySelector('.input-label')\r\n  const urlInput = document.querySelector('#url-input')\r\n  const shortenForm = document.querySelector('.shorten')\r\n\r\n  if(!errorContainer) return\r\n\r\n  urlInput.classList.remove('shorten__input--error')\r\n  shortenForm.classList.remove('shorten__error')\r\n  inputLabel.removeChild(errorContainer)\r\n}\r\n\r\nconst shortenUrlForm = document.querySelector('.shorten')\r\nconst shortenUrlInput = document.querySelector('#url-input')\r\nconst user = new ShortenUrl()\r\n\r\nif(localStorage.getItem('shortlyLinks')) {\r\n  user.shortenUrl = JSON.parse(localStorage.getItem('shortlyLinks'))\r\n  console.log('Load items from localStorage...')\r\n}\r\n\r\nshortenUrlForm.addEventListener('submit', ev => {\r\n  ev.preventDefault()\r\n\r\n  if(checkShortenUrlInput(shortenUrlInput.value)){\r\n    user.shortenUrl = shortenUrlInput.value\r\n    shortenUrlInput.value = ''\r\n    clearErrorMessage()\r\n  }\r\n})"]}