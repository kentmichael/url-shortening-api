"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var menuButton=document.querySelector("#menu");menuButton.addEventListener("click",(function(){if(!document.querySelector("#menu-modal"))return createDialog();document.querySelector("#menu-modal").close(),removeDialog()}));var removeDialog=function(){var e=document.querySelector(".nav"),t=document.querySelector("#menu-modal");e.removeChild(t)},createDialog=function(){var e=document.querySelector(".nav"),t=document.createElement("dialog"),r=document.createElement("ul"),n=document.createElement("hr");["Features","Pricing","Resources","hr","Login","Sign Up"].forEach((function(e){var t=document.createElement("li"),o=document.createElement("a");"Sign Up"===e&&o.classList.add("cta"),"hr"!==e?(o.setAttribute("href","#"),o.innerText=e,t.appendChild(o)):t.appendChild(n),r.appendChild(t)})),r.classList.add("menu-links"),t.open=!0,t.id="menu-modal",t.classList.add("container"),t.appendChild(r),e.appendChild(t)},ShortenUrl=function(){function e(){_classCallCheck(this,e),_defineProperty(this,"_shortenUrl",[]),_defineProperty(this,"_linkId",0)}return _createClass(e,[{key:"shortenUrl",get:function(){return this._shortenUrl},set:function(e){var t=this;Array.isArray(e)?(this._shortenUrl=structuredClone(e),this._linkId=this._shortenUrl[this._shortenUrl.length-1].linkId,displayResults(this.shortenUrl)):fetch("https://api.shrtco.de/v2/shorten?url=".concat(e)).then((function(e){if(201!==e.status)throw new Error(e.statusText);return e.json()})).then((function(r){var n=t._linkId+1;t._linkId=n,t._shortenUrl.push({linkId:n,link:e,shortenedLink:r.result.full_short_link}),displayItem(n,e,r.result.full_short_link),saveResultsToLocalStorage(t.shortenUrl)})).catch((function(e){console.log(e)}))}}]),e}();function saveResultsToLocalStorage(e){localStorage.setItem("shortlyLinks",JSON.stringify(e)),console.log("Save item to localStorage...")}function displayItem(e,t,r){var n=document.createElement("div"),o=document.createElement("span"),l=document.createElement("span"),s=document.createElement("button");o.classList.add("features__results--link"),o.innerText=t,l.classList.add("features__results--shortenlink"),l.innerText=r,s.innerText="Copy",s.setAttribute("id","copy-link"),s.classList.add("cta","link".concat(e)),s.addEventListener("click",(function(){copyShortenedLink("link".concat(e),r)})),n.append(o,l,s),displayItemContainer(n)}function displayItemContainer(e){var t;if(document.querySelector("#features-result"))t=document.querySelector("#features-result");else{var r=document.querySelector(".features");(t=document.createElement("div")).setAttribute("id","features-result"),t.classList.add("features__results"),t.classList.add("container"),r.insertAdjacentElement("afterbegin",t)}return t.prepend(e)}function copyShortenedLink(e,t){navigator.clipboard.writeText(t).then((function(){var t=document.querySelector(".".concat(e));t.innerText="Copied!",t.classList.add("features__results--copiedlink")})).catch((function(e){return console.log(e)}))}function displayResults(e){e.forEach((function(e){displayItem(e.linkId,e.link,e.shortenedLink)}))}var checkShortenUrlInput=function(e){return e?!!/^(ftp|http|https):\/\/[^ "]+$/.test(e):(displayErrorMessage("Please add a link"),!1)},displayErrorMessage=function(e){var t=document.createElement("span");document.querySelector("#error-msg")&&(t=document.querySelector("#error-msg"));var r=document.querySelector(".input-label"),n=document.querySelector("#url-input"),o=document.querySelector(".shorten");n.classList.add("shorten__input--error"),o.classList.add("shorten__error"),t.setAttribute("id","error-msg"),t.innerText=e,r.appendChild(t)},clearErrorMessage=function(){var e=document.querySelector("#error-msg"),t=document.querySelector(".input-label"),r=document.querySelector("#url-input"),n=document.querySelector(".shorten");e&&(r.classList.remove("shorten__input--error"),n.classList.remove("shorten__error"),t.removeChild(e))},shortenUrlForm=document.querySelector(".shorten"),shortenUrlInput=document.querySelector("#url-input"),user=new ShortenUrl;localStorage.getItem("shortlyLinks")&&(user.shortenUrl=JSON.parse(localStorage.getItem("shortlyLinks")),console.log("Load items from localStorage...")),shortenUrlForm.addEventListener("submit",(function(e){e.preventDefault(),checkShortenUrlInput(shortenUrlInput.value)&&(user.shortenUrl=shortenUrlInput.value,shortenUrlInput.value="",clearErrorMessage())}));
//# sourceMappingURL=script.js.map